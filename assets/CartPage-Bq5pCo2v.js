import{j as t,r as i,q as d,s as p,t as x,v as h,w as j,L as y,d as g}from"./index-DwKbRvpM.js";import{a as C,u as f}from"./hooks-Dp1X6LCu.js";import{C as I,L as b}from"./CartItem-D-Aps_Fn.js";import{H as v,B as E}from"./Heading-C5kbgIhg.js";import"./Button-DJc1Gurw.js";const H=({products:e,onChangeQuantity:n,onRemoveItem:r})=>{const s=e.map(o=>t.jsx(I,{...o,onChangeQuantity:n,onRemoveItem:r},o.id));return t.jsx(t.Fragment,{children:s})},L="_container_ptx4s_1",F={container:L},S=({products:e})=>{const n=e.reduce((r,s)=>s.quantity&&typeof s.quantity=="number"?r+s.price*s.quantity:r,0);return t.jsxs("div",{className:F.container,children:[t.jsx("span",{children:"Subtotal:"}),t.jsxs("span",{children:[" ",n.toFixed(2)," EGP"]})]})},q=()=>{const e=C(),{items:n,productsFullInfo:r,loading:s,error:o}=f(a=>a.cart);i.useEffect(()=>{const a=e(d());return()=>{a.abort(),e(p())}},[e]);const c=r.map(a=>({...a,quantity:n[a.id]})),m=i.useCallback((a,u)=>{e(x({id:a,quantity:u}))},[e]),l=i.useCallback(a=>{e(h(a))},[e]);return{products:c,loading:s,error:o,changeQuantityHandler:m,removeItemHandler:l}},A=()=>{const{products:e,loading:n,error:r,changeQuantityHandler:s,removeItemHandler:o}=q();return t.jsxs(t.Fragment,{children:[t.jsx(v,{title:"Your Cart"}),t.jsx(b,{loading:n,error:r,type:"cart",children:e.length?t.jsxs(t.Fragment,{children:[t.jsx(H,{products:e,onChangeQuantity:s,onRemoveItem:o}),t.jsx(S,{products:e})]}):t.jsxs(t.Fragment,{children:[t.jsx(j,{type:"empty",message:"Your cart is empty"}),t.jsx(y,{to:g.CATEGORIES,className:"d-flex justify-content-center",children:t.jsx(E,{variant:"primary",className:"my-2",children:"Shop Now"})})]})})]})};export{A as default};
