import{j as t,r as c,e as d,C as p,f as x,h,L as j}from"./index-BpFg4eXB.js";import{b as g,a as C}from"./hooks-lwaHL92a.js";import{C as y,H as f,L as b,B as I}from"./CartItem-C3I2W5TP.js";import"./ThemeProvider-DOQufC3f.js";const v=({products:e,onChangeQuantity:n,onRemoveItem:r})=>{const s=e.map(o=>t.jsx(y,{...o,onChangeQuantity:n,onRemoveItem:r},o.id));return t.jsx(t.Fragment,{children:s})},H="_container_ptx4s_1",L={container:H},N=({products:e})=>{const n=e.reduce((r,s)=>s.quantity&&typeof s.quantity=="number"?r+s.price*s.quantity:r,0);return t.jsxs("div",{className:L.container,children:[t.jsx("span",{children:"Subtotal:"}),t.jsxs("span",{children:[" ",n.toFixed(2)," EGP"]})]})},k=()=>{const e=g(),{items:n,productsFullInfo:r,loading:s,error:o}=C(a=>a.cart);c.useEffect(()=>{const a=e(d());return()=>{a.abort(),e(p())}},[e]);const i=r.map(a=>({...a,quantity:n[a.id]})),l=c.useCallback((a,u)=>{e(x({id:a,quantity:u}))},[e]),m=c.useCallback(a=>{e(h(a))},[e]);return{products:i,loading:s,error:o,changeQuantityHandler:l,removeItemHandler:m}},P=()=>{const{products:e,loading:n,error:r,changeQuantityHandler:s,removeItemHandler:o}=k();return t.jsxs(t.Fragment,{children:[t.jsx(f,{title:"Your Cart"}),t.jsx(b,{loading:n,error:r,children:e.length?t.jsxs(t.Fragment,{children:[t.jsx(v,{products:e,onChangeQuantity:s,onRemoveItem:o}),t.jsx(N,{products:e})]}):t.jsxs("div",{children:[t.jsx("p",{className:"text-center",children:"Start adding some products to your cart"}),t.jsx("p",{className:"text-center",children:"ðŸ‘‡"}),t.jsx(I,{variant:"link",className:"d-block mx-auto",children:t.jsx(j,{to:"/categories",className:"",children:"Shop Now"})})]})})]})};export{P as default};
