import{j as t,h as d,e as p,r as c,A as x,B as h,D as j,E as y,F as g,L as C,f}from"./index-wnTk3KwH.js";import{C as I,L as E}from"./CartItem-DTTXuh8n.js";import{H as b}from"./Heading-RtEnZzgB.js";import{a as F}from"./warning-DFf_0RsR.js";const H=({products:e,onChangeQuantity:n,onRemoveItem:r})=>{const s=e.map(o=>t.jsx(I,{...o,onChangeQuantity:n,onRemoveItem:r},o.id));return t.jsx(t.Fragment,{children:s})},L="_container_ptx4s_1",v={container:L},S=({products:e})=>{const n=e.reduce((r,s)=>s.quantity&&typeof s.quantity=="number"?r+s.price*s.quantity:r,0);return t.jsxs("div",{className:v.container,children:[t.jsx("span",{children:"Subtotal:"}),t.jsxs("span",{children:[" ",n.toFixed(2)," EGP"]})]})},R=()=>{const e=d(),{items:n,productsFullInfo:r,loading:s,error:o}=p(a=>a.cart);c.useEffect(()=>{const a=e(x());return()=>{a.abort(),e(h())}},[e]);const i=r.map(a=>({...a,quantity:n[a.id]})),m=c.useCallback((a,u)=>{e(j({id:a,quantity:u}))},[e]),l=c.useCallback(a=>{e(y(a))},[e]);return{products:i,loading:s,error:o,changeQuantityHandler:m,removeItemHandler:l}},Q=()=>{const{products:e,loading:n,error:r,changeQuantityHandler:s,removeItemHandler:o}=R();return t.jsxs(t.Fragment,{children:[t.jsx(b,{title:"Your Cart"}),t.jsx(E,{loading:n,error:r,type:"cart",children:e.length?t.jsxs(t.Fragment,{children:[t.jsx(H,{products:e,onChangeQuantity:s,onRemoveItem:o}),t.jsx(S,{products:e})]}):t.jsxs(t.Fragment,{children:[t.jsx(g,{type:"empty",message:"Your cart is empty"}),t.jsx(C,{to:f.CATEGORIES,className:"d-flex justify-content-center",children:t.jsx(F,{variant:"primary",className:"my-2",children:"Shop Now"})})]})})]})};export{Q as default};
