import{l as x,d as j,m as b,b as S,e as w,g as E,r as v,n as A,o as L,p as P,q as F,j as s}from"./index-BP77i2Bk.js";import{u as H,a as R,A as l,I as u}from"./Input-BnC4mHtu.js";import{H as y}from"./Heading-B4wgSNhp.js";import{R as C,C as q}from"./Row-gmytxdi1.js";import{F as B,S as I}from"./Spinner-BBW5ju7R.js";import{B as N}from"./Button-DoyuUPbG.js";import"./hook-CnfcvmXm.js";import"./useEventCallback-DxQmx_i4.js";import"./CloseButton-Bswu-Ih9.js";import"./Anchor-B9Cte2h4.js";import"./warning-xdCFWgwQ.js";const O=()=>{const[r,i]=x(),a=j(),n=b(),e=S(),{loading:t,error:c}=w(m=>m.auth),{register:o,handleSubmit:d,formState:{errors:p,isValid:g}}=H({mode:"onChange",shouldFocusError:!0,resolver:R(L)}),h=n.state?.redirect||E.HOME,f=m=>{i({}),e(P(m)).unwrap().then(()=>{e(F()),a(h,{replace:!0})})};return v.useEffect(()=>()=>{e(A())},[e]),{formErrors:p,isValid:g,loading:t,error:c,searchParams:r,register:o,handleSubmit:d,submitHandler:f}},K=()=>{const{register:r,handleSubmit:i,formErrors:a,isValid:n,loading:e,error:t,submitHandler:c,searchParams:o}=O();return s.jsxs("section",{children:[s.jsx(y,{title:"User Login"}),s.jsx(C,{className:"my-2",children:s.jsxs(q,{md:{span:6,offset:3},children:[o.get("msg")==="login_required"&&s.jsx(l,{variant:"success",children:"You need to be login to view this content, please login"}),o.get("msg")==="registration_successful"&&s.jsxs(l,{variant:"success",children:["You account has been created, please login"," "]}),s.jsxs(B,{onSubmit:i(c),children:[s.jsx(u,{label:"Email",name:"email",register:r,error:a.email?.message||"",autoFocus:!0}),s.jsx(u,{label:"Password",name:"password",type:"password",register:r,error:a.password?.message||""}),s.jsx(N,{disabled:!n||e==="pending",variant:"info",type:"submit",style:{color:"white"},children:e==="pending"?s.jsxs(s.Fragment,{children:[s.jsx(I,{as:"span",animation:"grow",size:"sm"})," loading....."]}):"Login"}),t&&s.jsxs(l,{variant:"danger mt-2",children:[" ",t," "]})]})]})})]})};export{K as default};
