import{m as f,e as j,n as S,d as b,f as v,h as w,r as E,o as L,p as A,q as P,s as F,j as s}from"./index-CO07VfhB.js";import{u as y,a as H,A as d,I as m}from"./Input-bEMIZj4K.js";import{H as R,R as N,C as q,F as B,S as C}from"./Heading-DsbmKIAi.js";import{a as I}from"./warning-Dz1zIpaj.js";import"./CloseButton-A6JS-OX6.js";const O=()=>{const[r,n]=f(),a=j(),i=S(),e=b(),{loading:t,error:c}=v(l=>l.auth),{register:o,handleSubmit:u,formState:{errors:g,isValid:h}}=y({mode:"onBlur",shouldFocusError:!0,resolver:H(A)}),p=i.state?.redirect||w.HOME,x=l=>{n({}),e(P(l)).unwrap().then(()=>{e(F()),a(p,{replace:!0})})};return E.useEffect(()=>()=>{e(L())},[e]),{formErrors:g,isValid:h,loading:t,error:c,searchParams:r,register:o,handleSubmit:u,submitHandler:x}},D=()=>{const{register:r,handleSubmit:n,formErrors:a,isValid:i,loading:e,error:t,submitHandler:c,searchParams:o}=O();return s.jsxs("section",{children:[s.jsx(R,{title:"User Login"}),s.jsx(N,{className:"my-2",children:s.jsxs(q,{md:{span:6,offset:3},children:[o.get("msg")==="login_required"&&s.jsx(d,{variant:"success",children:"You need to be login to view this content, please login"}),o.get("msg")==="registration_successful"&&s.jsxs(d,{variant:"success",children:["You account has been created, please login"," "]}),s.jsxs(B,{onSubmit:n(c),children:[s.jsx(m,{label:"Email",name:"email",register:r,error:a.email?.message||"",autoFocus:!0}),s.jsx(m,{label:"Password",name:"password",type:"password",register:r,error:a.password?.message||""}),s.jsx(I,{disabled:!i||e==="pending",variant:"info",type:"submit",style:{color:"white"},children:e==="pending"?s.jsxs(s.Fragment,{children:[s.jsx(C,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),s.jsx("span",{className:"visually-hidden",children:"Loading..."})]}):"Login"}),t&&s.jsxs(d,{variant:"danger mt-2",children:[" ",t," "]})]})]})})]})};export{D as default};
