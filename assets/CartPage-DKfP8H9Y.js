import{j as t,r as c,k as d,l as p,m as x,n as h,o as j,L as y,d as g}from"./index-D_K4arVa.js";import{b as C,a as f}from"./hooks-DWueiHMf.js";import{C as I,H as b,L as E,B as H}from"./CartItem-ikquKn4o.js";const L=({products:e,onChangeQuantity:r,onRemoveItem:n})=>{const s=e.map(o=>t.jsx(I,{...o,onChangeQuantity:r,onRemoveItem:n},o.id));return t.jsx(t.Fragment,{children:s})},v="_container_ptx4s_1",S={container:v},F=({products:e})=>{const r=e.reduce((n,s)=>s.quantity&&typeof s.quantity=="number"?n+s.price*s.quantity:n,0);return t.jsxs("div",{className:S.container,children:[t.jsx("span",{children:"Subtotal:"}),t.jsxs("span",{children:[" ",r.toFixed(2)," EGP"]})]})},R=()=>{const e=C(),{items:r,productsFullInfo:n,loading:s,error:o}=f(a=>a.cart);c.useEffect(()=>{const a=e(d());return()=>{a.abort(),e(p())}},[e]);const i=n.map(a=>({...a,quantity:r[a.id]})),l=c.useCallback((a,u)=>{e(x({id:a,quantity:u}))},[e]),m=c.useCallback(a=>{e(h(a))},[e]);return{products:i,loading:s,error:o,changeQuantityHandler:l,removeItemHandler:m}},P=()=>{const{products:e,loading:r,error:n,changeQuantityHandler:s,removeItemHandler:o}=R();return t.jsxs(t.Fragment,{children:[t.jsx(b,{title:"Your Cart"}),t.jsx(E,{loading:r,error:n,type:"cart",children:e.length?t.jsxs(t.Fragment,{children:[t.jsx(L,{products:e,onChangeQuantity:s,onRemoveItem:o}),t.jsx(F,{products:e})]}):t.jsxs("section",{className:"d-flex flex-column align-items-center",children:[t.jsx(j,{type:"empty",message:"Your cart is empty"}),t.jsx(y,{to:g.CATEGORIES,children:t.jsx(H,{variant:"primary",className:"my-2",children:"Shop Now"})})]})})]})};export{P as default};
