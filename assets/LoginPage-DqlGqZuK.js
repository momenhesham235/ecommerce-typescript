import{l as f,d as j,m as b,b as S,e as w,g as E,r as v,n as A,o as L,p as P,q as F,j as s}from"./index-Jqg1otTD.js";import{u as H,a as R,A as m,I as u}from"./Input-BskJ17Kx.js";import{H as y,R as C,C as q,F as I,S as N}from"./Heading-B20WNSnQ.js";import{a as O}from"./warning-Dzgz_eEz.js";import"./Anchor-DkUBKa0z.js";import"./CloseButton-B6wDIWZm.js";const U=()=>{const[r,n]=f(),a=j(),i=b(),e=S(),{loading:t,error:c}=w(l=>l.auth),{register:o,handleSubmit:d,formState:{errors:g,isValid:p}}=H({mode:"onChange",shouldFocusError:!0,resolver:R(L)}),h=i.state?.redirect||E.HOME,x=l=>{n({}),e(P(l)).unwrap().then(()=>{e(F()),a(h,{replace:!0})})};return v.useEffect(()=>()=>{e(A())},[e]),{formErrors:g,isValid:p,loading:t,error:c,searchParams:r,register:o,handleSubmit:d,submitHandler:x}},M=()=>{const{register:r,handleSubmit:n,formErrors:a,isValid:i,loading:e,error:t,submitHandler:c,searchParams:o}=U();return s.jsxs("section",{children:[s.jsx(y,{title:"User Login"}),s.jsx(C,{className:"my-2",children:s.jsxs(q,{md:{span:6,offset:3},children:[o.get("msg")==="login_required"&&s.jsx(m,{variant:"success",children:"You need to be login to view this content, please login"}),o.get("msg")==="registration_successful"&&s.jsxs(m,{variant:"success",children:["You account has been created, please login"," "]}),s.jsxs(I,{onSubmit:n(c),children:[s.jsx(u,{label:"Email",name:"email",register:r,error:a.email?.message||"",autoFocus:!0}),s.jsx(u,{label:"Password",name:"password",type:"password",register:r,error:a.password?.message||""}),s.jsx(O,{disabled:!i||e==="pending",variant:"info",type:"submit",style:{color:"white"},children:e==="pending"?s.jsxs(s.Fragment,{children:[s.jsx(N,{as:"span",animation:"grow",size:"sm"})," loading....."]}):"Login"}),t&&s.jsxs(m,{variant:"danger mt-2",children:[" ",t," "]})]})]})})]})};export{M as default};
